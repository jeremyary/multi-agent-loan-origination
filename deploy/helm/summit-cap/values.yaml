# Default values for summit-cap
global:
  imageRegistry: quay.io
  imageRepository: summit-cap
  imageTag: latest
  imagePullPolicy: Always
  storageClass: ""

# Secrets configuration - these values should be overridden with actual secrets
secrets:
  # Database secrets
  POSTGRES_DB: "summit-cap"
  POSTGRES_USER: "user"
  POSTGRES_PASSWORD: "changeme"

  # API secrets
  DATABASE_URL: "postgresql+asyncpg://user:changeme@summit-cap-db:5432/summit-cap"
  COMPLIANCE_DATABASE_URL: "postgresql+asyncpg://compliance_app:compliance_pass@summit-cap-db:5432/summit-cap"
  DEBUG: "false"
  ALLOWED_HOSTS: '["*"]'

  # Auth (Keycloak) -- set AUTH_DISABLED=true to bypass for demo
  AUTH_DISABLED: "false"
  KEYCLOAK_URL: "http://keycloak:8080"
  KEYCLOAK_REALM: "summit-cap"
  KEYCLOAK_CLIENT_ID: "summit-cap-ui"
  JWKS_CACHE_TTL: "300"

  # Storage (S3 / MinIO)
  S3_ENDPOINT: "http://minio:9000"
  S3_ACCESS_KEY: "minio"
  S3_SECRET_KEY: "miniosecret"
  S3_BUCKET: "documents"
  S3_REGION: "us-east-1"
  UPLOAD_MAX_SIZE_MB: "50"

  # LLM
  LLM_API_KEY: "not-needed"
  LLM_BASE_URL: "http://vllm:8000/v1"
  LLM_MODEL_FAST: "gpt-4o-mini"
  LLM_MODEL_CAPABLE: "gpt-4o-mini"

  # Safety / Shields (optional)
  SAFETY_MODEL: ""
  SAFETY_ENDPOINT: ""
  SAFETY_API_KEY: ""

  # Observability (LangFuse) -- leave blank to disable tracing
  LANGFUSE_PUBLIC_KEY: ""
  LANGFUSE_SECRET_KEY: ""
  LANGFUSE_HOST: ""

  # Admin panel
  SQLADMIN_USER: "admin"
  SQLADMIN_PASSWORD: "admin"
  SQLADMIN_SECRET_KEY: "change-me-in-production"

  # UI secrets
  VITE_API_BASE_URL: "http://localhost:8000"
  VITE_ENVIRONMENT: "production"
# OpenShift Routes configuration
routes:
  enabled: true
  annotations: {}
  sharedHost: ""  # Set custom hostname or leave empty (will use ui.host fallback)
  ui:
    host: ""  # Used as fallback if sharedHost is empty
    tls:
      enabled: true
      termination: edge
      insecureEdgeTerminationPolicy: Redirect
  api:
    host: ""  # Ignored - uses sharedHost or ui.host
    tls:
      enabled: true
      termination: edge
      insecureEdgeTerminationPolicy: Redirect

# API configuration
api:
  enabled: true
  name: summit-cap-api
  image:
    repository: summit-cap-api
    tag: latest
  service:
    type: ClusterIP
    port: 8000
  replicas: 1
  resources:
    requests:
      memory: "512Mi"
      cpu: "250m"
    limits:
      memory: "1Gi"
      cpu: "1000m"
  healthCheck:
    enabled: true
    path: /health/
    initialDelaySeconds: 30
    periodSeconds: 10
  config:
    modelsYaml: |
      routing:
        default_tier: capable_large
        classification:
          strategy: rule_based
      tiers:
        fast:
          endpoint: "${LLM_BASE_URL:-http://localhost:11434/v1}"
          model_name: "${LLM_MODEL_FAST:-gpt-4o-mini}"
        capable_large:
          endpoint: "${LLM_BASE_URL:-http://localhost:11434/v1}"
          model_name: "${LLM_MODEL_CAPABLE:-gpt-4o-mini}"
# UI configuration
ui:
  enabled: true
  name: summit-cap-ui
  image:
    repository: summit-cap-ui
    tag: latest
  service:
    type: ClusterIP
    port: 8080
  replicas: 1
  resources:
    requests:
      memory: "128Mi"
      cpu: "100m"
    limits:
      memory: "256Mi"
      cpu: "500m"
  healthCheck:
    enabled: true
    path: /
    initialDelaySeconds: 10
    periodSeconds: 10
# Database configuration
database:
  enabled: true
  name: summit-cap-db
  image:
    repository: pgvector/pgvector
    tag: pg16
  service:
    type: ClusterIP
    port: 5432
  persistence:
    enabled: true
    size: 10Gi
    accessMode: ReadWriteOnce
  resources:
    requests:
      memory: "256Mi"
      cpu: "100m"
    limits:
      memory: "512Mi"
      cpu: "500m"
# Database migration configuration
migration:
  enabled: true
  name: summit-cap-migration
  image:
    repository: summit-cap-db
    tag: latest
  restartPolicy: Never
  backoffLimit: 1
  ttlSecondsAfterFinished: 86400
  resources:
    requests:
      memory: "1Gi"
      cpu: "250m"
    limits:
      memory: "2Gi"
      cpu: "1000m"
# ServiceAccount
serviceAccount:
  create: true
  annotations: {}
  name: ""

# Pod Security Context
podSecurityContext: {}

# Security Context
securityContext:
  allowPrivilegeEscalation: false
  capabilities:
    drop:
    - ALL
  readOnlyRootFilesystem: false
  runAsNonRoot: true
  seccompProfile:
    type: RuntimeDefault

# Node selector
nodeSelector: {}

# Tolerations
tolerations: []

# Affinity
affinity: {}
