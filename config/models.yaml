# Model routing configuration for Summit Cap Financial.
#
# Both tiers currently point to the same endpoint for local dev.
# When two models are available, update endpoints/model_names independently.
# Hot-reloaded per conversation via mtime check -- no restart required.

routing:
  default_tier: capable_large
  classification:
    strategy: rule_based
    rules:
      simple:
        max_query_words: 10
        patterns:
          - "status"
          - "when"
          - "what is"
          - "show me"
          - "how much"
          - "my application"
          - "hello"
          - "hi"
          - "thanks"
          - "thank you"
      complex:
        default: true
        keywords:
          - "compliance"
          - "regulation"
          - "regulatory"
          - "dti"
          - "debt-to-income"
          - "calculate"
          - "affordability"
          - "document"
          - "resubmit"
          - "underwriting"
          - "submit"
          - "review"
          - "application"
          - "condition"
          - "rate lock"
          - "compare"
          - "analyze"
          - "draft"
          - "communication"
          - "knowledge base"
          - "ecoa"
          - "trid"
          - "hmda"
          - "fcra"
          - "fha"
          - "fannie"
          - "freddie"
          - "atr"
          - "qualified mortgage"
          - "appraisal"
          - "fair lending"

models:
  fast_small:
    provider: openai_compatible
    model_name: "${LLM_MODEL_FAST:-gpt-4o-mini}"
    description: "Fast model for simple factual queries"
    endpoint: "${LLM_BASE_URL:-https://api.openai.com/v1}"
    api_key: "${LLM_API_KEY:-not-needed}"
  capable_large:
    provider: openai_compatible
    model_name: "${LLM_MODEL_CAPABLE:-gpt-4o-mini}"
    description: "Capable model for complex reasoning and tool use"
    endpoint: "${LLM_BASE_URL:-https://api.openai.com/v1}"
    api_key: "${LLM_API_KEY:-not-needed}"
  embedding:
    provider: openai_compatible
    model_name: "${EMBEDDING_MODEL:-nomic-embed-text-v1.5}"
    description: "Embedding model for compliance KB vector search"
    endpoint: "${LLM_BASE_URL:-https://api.openai.com/v1}"
    api_key: "${LLM_API_KEY:-not-needed}"
    dimensions: 768
